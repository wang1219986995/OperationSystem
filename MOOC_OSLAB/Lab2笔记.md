操作系统的启动过程



总体说明

1 当PC的电源打开后，80x86结构的CPU将自动进入实模式，并从地址0xFFFF0开始自动执行程序代码，这个地址通常是ROM-BIOS中的地址。

问题：实模式、保护模式的区别



2 PC机的BIOS将执行某些系统的检测，并在物理地址0处开始初始化中断向量。





3 此后，它将可启动设备的第一个扇区(磁盘引导扇区，512字节)读入内存绝对地址0x7C00处，并跳转到这个地方。启动设备通常是软驱或是硬盘。





bootsect的代码为什么不把系统模块直接加载到物理地址0x0000开始处而要在setup程序中再进行移动呢？这是因为在随后执行的stup代码开始部分还需要利用ROM BIOS中的中断调用来获取机器的一些参数(例如显示卡模式、硬盘参数表等)。当BIOS初始化时会在物理内存开始处放置一个大小为
0x400字节(1KB)的中断向量表，因此需要在使用完BIOS的中断调用后才能将这个区域覆盖掉。



这里需要弄明白的问题：

1. 实模式到保护模式的切换
2. 中断向量表的内容









启动步骤：

1 BIOS 

BIOS 将可启动设备的第一个扇区读到 7c00 处，并跳转到此处执行





2 boot/bootsect.s

这是操作系统中第一个可控制的地方，操作系统的代码也由此开始。

重要节点：

将自身移到 0x90000处，占 [90000, 90200) ;

随后将 setup.s 读入 90200 处；

将内核的其他部分(system) 读入 0x10000处；

















